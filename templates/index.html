<!DOCTYPE HTML>
<html>
<head>
    <title>RedactVideo</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    
      <script type='text/javascript' src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/cerulean/bootstrap.min.css" type="text/css" />
    <script>
function selectContainer(containerName) {
    // hide all containers except the nav one
    $('.container').not('nav .container').hide();
    // show the clicked on container
    $('#' + containerName + '_container').show();
    // remove active class from currently active link
    $('.active').removeClass("active");
    // make the clicked on link's parent li active
    var theLink = $("a[href^='#" + containerName + "']")
    theLink.parent().addClass("active");
}

function cad() {
    //console.log("CAD MAP");
    // Intialize our map
    var center = new google.maps.LatLng(47.6169887, -122.2867016);
    var mapOptions = {
        zoom: 13,
        center: center
    }
    var map = new google.maps.Map(document.getElementById("map"), mapOptions);


    //$.get('https://data.seattle.gov/resource/y7pv-r3kh.json?$where=general_offense_number=%222015903263%22%20OR%20general_offense_number=%222015162089%22')

    $.get('https://data.seattle.gov/resource/n6as-h2bj.json?$select=id_external&$group=id_external', function(data) {

        window.goNumbers = [];
        window.goNumberConversion = {};
        var str = 'For more information, see Chapter 3.4.5.1';
        var re = /^\d+\-\d+$/i;
        var found = str.match(re);
        for (var i = 0; i < data.length; i++) {
            if (data[i]['id_external'].match(re)) {
                var goNumber = data[i]['id_external'];
                var parts = goNumber.split("-");
                if (parts[0].length != 4) {
                    parts[0] = '20' + parts[0];
                }
                //if (parts[1].length < 6) {
                //    parts[1] = '0'+parts[1];   
                //}
                goNumber = parts[0] + parts[1];
                window.goNumbers.push(goNumber);
                window.goNumberConversion[goNumber] = data[i]['id_external'];
                var goNumber = data[i]['id_external'];
                var parts = goNumber.split("-");
                if (parts[0].length != 4) {
                    parts[0] = '20' + parts[0];
                }
                for (var j = 0; j < parts[1].length; j++) {
                    if (parts[1][j] == '0') {
                        parts[1] = parts[1].slice(1);
                        //console.log(parts[1]);
                    } else {
                        break;
                    }
                }
                goNumber = parts[0] + parts[1];
                window.goNumbers.push(goNumber);
                window.goNumberConversion[goNumber] = data[i]['id_external'];
                var goNumber = data[i]['id_external'];
                var parts = goNumber.split("-");
                if (parts[0].length != 4) {
                    parts[0] = '20' + parts[0];
                }
                if (parts[1].length < 6) {
                    parts[1] = '0'.repeat(6 - parts[1].length) + parts[1];
                }
                goNumber = parts[0] + parts[1];
                window.goNumbers.push(goNumber);
                window.goNumberConversion[goNumber] = data[i]['id_external'];
            }
        }
        $.get('https://data.seattle.gov/resource/dqyq-sizd.json?$select=opa_case_number,external_case_number&$order=opa_case_number&$where=external_case_number%20IS%20NOT%20NULL', function(data2) {
            window.opaCases = [];
            //console.log(JSON.stringify(data2));
            for (var i = 0; i < data2.length; i++) {
                if (window.goNumbers.indexOf(data2[i]['external_case_number'].replace('-', '')) > -1) {
                    if (window.opaCases.indexOf(data2[i]['external_case_number']) == -1) {
                        window.opaCases.push(data2[i]['external_case_number']);
                        $('#opa_cases').append('<option value="' + data2[i]['external_case_number'] + '">' + data2[i]['opa_case_number'] + ' (' + data2[i]['external_case_number'] + ')</option>');
                    }
                }

            }
            //console.log(JSON.stringify(window.opaCases));
        });
        var url = 'https://data.seattle.gov/resource/y7pv-r3kh.json?$where=';
        for (var i = 0; i < window.goNumbers.length; i++) {
            url += 'general_offense_number=%22' + window.goNumbers[i] + '%22';
            if (i != (window.goNumbers.length - 1)) {
                url += ' OR ';
            }
        }
        $.get('https://data.seattle.gov/resource/pu5n-trf4.json?$limit=50000&$where=(district_sector=%22E%22%20OR%20district_sector=%22C%22%20OR%20district_sector=%22G%22)%20AND%20at_scene_time%20between%20%272014-12-18T12:00:00%27%20and%20%272015-03-30T14:00:00%27', function(data) {
            window.rms = [];
            for (var i = 0; i < data.length; i++) {
                //console.log(window.goNumbers+' '+data[i]['general_offense_number']);
                //console.log(data[i]['general_offense_number']);
                if (window.goNumbers.indexOf(data[i]['general_offense_number']) > -1) {
                    //console.log('yes');
                    window.rms.push(data[i]);
                }
            }
            //console.log(window.rms);
            $.each(window.rms, function(i, entry) {
                var contentString = '<div id="content">' +
                    '<div id="siteNotice">' +
                    '</div>' +
                    '<h1 id="firstHeading" class="firstHeading">' + entry.initial_type_description + ' (' + entry.general_offense_number + ')</h1>' +
                    '<div id="bodyContent">' +
                    //'<input type="button" value="Show videos" class="map_show_videos" data-event-number="'+goNumberConversion[entry.general_offense_number]+'" onclick="showEvent(\''+goNumberConversion[entry.general_offense_number]+'\')" />'+
                    //'<input type="button" value="Show videos" class="map_show_videos" data-event-number="'+goNumberConversion[entry.general_offense_number]+'" />'+
                    '</div>' +
                    '</div>';

                var infowindow = new google.maps.InfoWindow({
                    content: contentString
                });
                var icon_name = entry.initial_type_group.replace(' ', '').replace('IES', 'Y').trim();
                if (icon_name.endsWith('CALLS')) {
                    //console.log(icon_name);
                    icon_name = icon_name.substring(0, icon_name.length - 5);
                }
                if (icon_name == 'CASUALTY') {
                    icon_name = 'INJURY';
                }
                if (icon_name == 'GUN') {
                    icon_name = 'WEAPON';
                }
                if (icon_name.endsWith('S') && icon_name != 'TRESPASS') {
                    icon_name = icon_name.substring(0, icon_name.length - 1);
                }
                if (icon_name == 'PERSONDOWN/INJURY') {
                    icon_name = 'INJURY';
                }
                if (icon_name == 'AUTORECOVERY') {
                    icon_name = 'VehicleTheft';
                }
                if (icon_name == 'THREATS,HARASSMENT') {
                    icon_name = 'Threats';
                }
                if (icon_name == 'THEFT') {
                    icon_name = 'OtherProp';
                }
                if (icon_name.indexOf('TRAFFICRELATED') > -1) {
                    icon_name = 'TRAFFIC';
                }
                if (icon_name == 'LIQUORVIOLATION') {
                    icon_name = 'Liquor';
                }
                if (icon_name.indexOf('BURGLARY') > -1) {
                    icon_name = 'Burglary';
                }
                if (icon_name.indexOf('MISC') > -1) {
                    icon_name = 'Misc';
                }
                if (icon_name.indexOf('NAR') > -1) {
                    icon_name = 'Narcotics';
                }
                if (icon_name.indexOf('SUS') > -1) {
                    icon_name = 'Suspicious';
                }
                if (icon_name.indexOf('DISTURBANCE') > -1) {
                    icon_name = 'Disturbance';
                }
                if (icon_name.indexOf('DAMAGE') > -1) {
                    icon_name = 'PropDamage';
                }
                if (icon_name.indexOf('PARKING') > -1) {
                    icon_name = 'VehicleTheft';
                }
                var marker = new google.maps.Marker({
                    position: new google.maps.LatLng(entry.latitude,
                        entry.longitude),
                    map: map,
                    title: entry.general_offense_number,
                    icon: 'http://web6.seattle.gov/mnm/images/crime2//' + icon_name + '.png'
                });
                marker.set("event_id", goNumberConversion[entry.general_offense_number]);
                google.maps.event.addListener(marker, 'click', function() {
                    $.get('https://data.seattle.gov/resource/ktpa-re45.json?go_number=' + entry.general_offense_number, function(rmsdata) {
                        if (rmsdata.length > 0) {
                            $('#narrative').html(rmsdata[0]['narrative']);
                        } else {
                            $('#narrative').html('');
                        }
                    });
                    showEvent(entry.general_offense_number);
                    //$(this).find('input').trigger('click');
                    //console.log($(this).find('input'));
                    if (openedInfoWindow != null)
                        openedInfoWindow.close();
                    infowindow.open(map, marker);
                    openedInfoWindow = infowindow;
                    google.maps.event.addListener(infowindow, 'closeclick', function() {
                        openedInfoWindow = null;
                    });
                    google.maps.event.addListener(map, 'click', function() {
                        infowindow.close();
                    });
                });
            });
        });
        //console.log(url); // url too long for DSG
        //console.log(window.goNumbers);

    });
}

function rms() {

    // Intialize our map
    var center = new google.maps.LatLng(47.6169887, -122.2867016);
    var mapOptions = {
        zoom: 13,
        center: center
    }
    var map = new google.maps.Map(document.getElementById("map"), mapOptions);


    //$.get('https://data.seattle.gov/resource/y7pv-r3kh.json?$where=general_offense_number=%222015903263%22%20OR%20general_offense_number=%222015162089%22')

    $.get('https://data.seattle.gov/resource/n6as-h2bj.json?$select=id_external&$group=id_external', function(data) {

        window.goNumbers = [];
        window.goNumberConversion = {};
        var str = 'For more information, see Chapter 3.4.5.1';
        var re = /^\d+\-\d+$/i;
        var found = str.match(re);
        for (var i = 0; i < data.length; i++) {
            if (data[i]['id_external'].match(re)) {
                var goNumber = data[i]['id_external'];
                var parts = goNumber.split("-");
                if (parts[0].length != 4) {
                    parts[0] = '20' + parts[0];
                }
                //if (parts[1].length < 6) {
                //    parts[1] = '0'+parts[1];   
                //}
                goNumber = parts[0] + parts[1];
                window.goNumbers.push(goNumber);
                window.goNumberConversion[goNumber] = data[i]['id_external'];
                var goNumber = data[i]['id_external'];
                var parts = goNumber.split("-");
                if (parts[0].length != 4) {
                    parts[0] = '20' + parts[0];
                }
                for (var j = 0; j < parts[1].length; j++) {
                    if (parts[1][j] == '0') {
                        parts[1] = parts[1].slice(1);
                        //console.log(parts[1]);
                    } else {
                        break;
                    }
                }
                goNumber = parts[0] + parts[1];
                window.goNumbers.push(goNumber);
                window.goNumberConversion[goNumber] = data[i]['id_external'];
                var goNumber = data[i]['id_external'];
                var parts = goNumber.split("-");
                if (parts[0].length != 4) {
                    parts[0] = '20' + parts[0];
                }
                if (parts[1].length < 6) {
                    parts[1] = '0'.repeat(6 - parts[1].length) + parts[1];
                }
                goNumber = parts[0] + parts[1];
                window.goNumbers.push(goNumber);
                window.goNumberConversion[goNumber] = data[i]['id_external'];
            }
        }
        $.get('https://data.seattle.gov/resource/dqyq-sizd.json?$select=opa_case_number,external_case_number&$order=opa_case_number&$where=external_case_number%20IS%20NOT%20NULL', function(data2) {
            window.opaCases = [];
            //console.log(JSON.stringify(data2));
            $('#opa_cases').html('');
            for (var i = 0; i < data2.length; i++) {
                if (window.goNumbers.indexOf(data2[i]['external_case_number'].replace('-', '')) > -1) {
                    if (window.opaCases.indexOf(data2[i]['external_case_number']) == -1) {
                        window.opaCases.push(data2[i]['external_case_number']);
                        $('#opa_cases').append('<option value="' + data2[i]['external_case_number'] + '">' + data2[i]['opa_case_number'] + ' (' + data2[i]['external_case_number'] + ')</option>');
                    }
                }

            }
            //console.log(JSON.stringify(window.opaCases));
        });
        var url = 'https://data.seattle.gov/resource/y7pv-r3kh.json?$where=';
        for (var i = 0; i < window.goNumbers.length; i++) {
            url += 'general_offense_number=%22' + window.goNumbers[i] + '%22';
            if (i != (window.goNumbers.length - 1)) {
                url += ' OR ';
            }
        }
        $.get('https://data.seattle.gov/resource/y7pv-r3kh.json?$limit=50000&$where=(district_sector=%22E%22%20OR%20district_sector=%22C%22%20OR%20district_sector=%22G%22)%20AND%20date_reported%20between%20%272014-12-18T12:00:00%27%20and%20%272015-03-30T14:00:00%27', function(data) {
            window.rms = [];
            for (var i = 0; i < data.length; i++) {
                //console.log(window.goNumbers+' '+data[i]['general_offense_number']);
                //console.log(data[i]['general_offense_number']);
                if (window.goNumbers.indexOf(data[i]['general_offense_number']) > -1) {
                    //console.log('yes');
                    window.rms.push(data[i]);
                }
            }
            //console.log(window.rms);
            $.each(window.rms, function(i, entry) {
                var contentString = '<div id="content">' +
                    '<div id="siteNotice">' +
                    '</div>' +
                    '<h1 id="firstHeading" class="firstHeading">' + entry.offense_type + ' (' + entry.general_offense_number + ')</h1>' +
                    '<div id="bodyContent">' +
                    //'<input type="button" value="Show videos" class="map_show_videos" data-event-number="'+goNumberConversion[entry.general_offense_number]+'" onclick="showEvent(\''+goNumberConversion[entry.general_offense_number]+'\')" />'+
                    //'<input type="button" value="Show videos" class="map_show_videos" data-event-number="'+goNumberConversion[entry.general_offense_number]+'" />'+
                    '</div>' +
                    '</div>';

                var infowindow = new google.maps.InfoWindow({
                    content: contentString
                });
                var icon_name = entry.offense_type.replace(' ', '').replace('IES', 'Y').trim();
                if (icon_name.endsWith('CALLS')) {
                    //console.log(icon_name);
                    icon_name = icon_name.substring(0, icon_name.length - 5);
                }
                if (icon_name == 'CASUALTY') {
                    icon_name = 'INJURY';
                }
                if (icon_name == 'GUN') {
                    icon_name = 'WEAPON';
                }
                if (icon_name.endsWith('S') && icon_name != 'TRESPASS') {
                    icon_name = icon_name.substring(0, icon_name.length - 1);
                }
                if (icon_name == 'PERSONDOWN/INJURY') {
                    icon_name = 'INJURY';
                }
                if (icon_name == 'AUTORECOVERY') {
                    icon_name = 'VehicleTheft';
                }
                if (icon_name == 'THREATS,HARASSMENT') {
                    icon_name = 'Threats';
                }
                if (icon_name == 'THEFT') {
                    icon_name = 'OtherProp';
                }
                if (icon_name.indexOf('TRAFFICRELATED') > -1) {
                    icon_name = 'TRAFFIC';
                }
                if (icon_name == 'LIQUORVIOLATION') {
                    icon_name = 'Liquor';
                }
                if (icon_name.indexOf('BURGLARY') > -1) {
                    icon_name = 'Burglary';
                }
                if (icon_name.indexOf('MISC') > -1) {
                    icon_name = 'Misc';
                }
                if (icon_name.indexOf('NAR') > -1) {
                    icon_name = 'Narcotics';
                }
                if (icon_name.indexOf('SUS') > -1) {
                    icon_name = 'Suspicious';
                }
                if (icon_name.indexOf('DISTURBANCE') > -1) {
                    icon_name = 'Disturbance';
                }
                if (icon_name.indexOf('DAMAGE') > -1) {
                    icon_name = 'PropDamage';
                }
                if (icon_name.indexOf('PARKING') > -1) {
                    icon_name = 'VehicleTheft';
                }
                var marker = new google.maps.Marker({
                    position: new google.maps.LatLng(entry.latitude,
                        entry.longitude),
                    map: map,
                    title: entry.general_offense_number,
                    icon: 'http://web6.seattle.gov/mnm/images/crime2//' + icon_name + '.png'
                });
                marker.set("event_id", goNumberConversion[entry.general_offense_number]);
                google.maps.event.addListener(marker, 'click', function() {
                    $.get('https://data.seattle.gov/resource/ktpa-re45.json?go_number=' + entry.general_offense_number, function(rmsdata) {
                        if (rmsdata.length > 0) {
                            $('#narrative').html(rmsdata[0]['narrative']);
                        } else {
                            $('#narrative').html('');
                        }
                    });
                    showEvent(entry.general_offense_number);
                    //$(this).find('input').trigger('click');
                    //console.log($(this).find('input'));
                    if (openedInfoWindow != null)
                        openedInfoWindow.close();
                    infowindow.open(map, marker);
                    openedInfoWindow = infowindow;
                    google.maps.event.addListener(infowindow, 'closeclick', function() {
                        openedInfoWindow = null;
                    });
                    google.maps.event.addListener(map, 'click', function() {
                        infowindow.close();
                    });
                });
            });
        });
        //console.log(url); // url too long for DSG
        //console.log(window.goNumbers);

    });
}

function rms_with_narrative() {

    // Intialize our map
    var center = new google.maps.LatLng(47.6169887, -122.2867016);
    var mapOptions = {
        zoom: 13,
        center: center
    }
    var map = new google.maps.Map(document.getElementById("map"), mapOptions);


    //$.get('https://data.seattle.gov/resource/y7pv-r3kh.json?$where=general_offense_number=%222015903263%22%20OR%20general_offense_number=%222015162089%22')

    $.get('https://data.seattle.gov/resource/n6as-h2bj.json?$select=id_external&$group=id_external', function(data) {

        window.goNumbers = [];
        window.goNumberConversion = {};
        var str = 'For more information, see Chapter 3.4.5.1';
        var re = /^\d+\-\d+$/i;
        var found = str.match(re);
        for (var i = 0; i < data.length; i++) {
            if (data[i]['id_external'].match(re)) {
                var goNumber = data[i]['id_external'];
                var parts = goNumber.split("-");
                if (parts[0].length != 4) {
                    parts[0] = '20' + parts[0];
                }
                //if (parts[1].length < 6) {
                //    parts[1] = '0'+parts[1];   
                //}
                goNumber = parts[0] + parts[1];
                window.goNumbers.push(goNumber);
                window.goNumberConversion[goNumber] = data[i]['id_external'];
                var goNumber = data[i]['id_external'];
                var parts = goNumber.split("-");
                if (parts[0].length != 4) {
                    parts[0] = '20' + parts[0];
                }
                for (var j = 0; j < parts[1].length; j++) {
                    if (parts[1][j] == '0') {
                        parts[1] = parts[1].slice(1);
                        //console.log(parts[1]);
                    } else {
                        break;
                    }
                }
                goNumber = parts[0] + parts[1];
                window.goNumbers.push(goNumber);
                window.goNumberConversion[goNumber] = data[i]['id_external'];
                var goNumber = data[i]['id_external'];
                var parts = goNumber.split("-");
                if (parts[0].length != 4) {
                    parts[0] = '20' + parts[0];
                }
                if (parts[1].length < 6) {
                    parts[1] = '0'.repeat(6 - parts[1].length) + parts[1];
                }
                goNumber = parts[0] + parts[1];
                window.goNumbers.push(goNumber);
                window.goNumberConversion[goNumber] = data[i]['id_external'];
            }
        }
        $.get('https://data.seattle.gov/resource/dqyq-sizd.json?$select=opa_case_number,external_case_number&$order=opa_case_number&$where=external_case_number%20IS%20NOT%20NULL', function(data2) {
            window.opaCases = [];
            //console.log(JSON.stringify(data2));
            for (var i = 0; i < data2.length; i++) {
                if (window.goNumbers.indexOf(data2[i]['external_case_number'].replace('-', '')) > -1) {
                    if (window.opaCases.indexOf(data2[i]['external_case_number']) == -1) {
                        window.opaCases.push(data2[i]['external_case_number']);
                        $('#opa_cases').append('<option value="' + data2[i]['external_case_number'] + '">' + data2[i]['opa_case_number'] + ' (' + data2[i]['external_case_number'] + ')</option>');
                    }
                }

            }
            //console.log(JSON.stringify(window.opaCases));
        });
        var url = 'https://data.seattle.gov/resource/y7pv-r3kh.json?$where=';
        for (var i = 0; i < window.goNumbers.length; i++) {
            url += 'general_offense_number=%22' + window.goNumbers[i] + '%22';
            if (i != (window.goNumbers.length - 1)) {
                url += ' OR ';
            }
        }
        $.get('https://data.seattle.gov/resource/y7pv-r3kh.json?$limit=50000&$where=(district_sector=%22E%22%20OR%20district_sector=%22C%22%20OR%20district_sector=%22G%22)%20AND%20date_reported%20between%20%272014-12-18T12:00:00%27%20and%20%272015-03-30T14:00:00%27', function(data) {
            window.rmsn = [];
            window.rmsnum = [];
            window.rms = [];
            //console.log(data.length);
            for (var i = 0; i < data.length; i++) {
                //console.log(window.goNumbers+' '+data[i]['general_offense_number']);
                //console.log(data[i]['general_offense_number']);
                if (window.goNumbers.indexOf(data[i]['general_offense_number']) > -1) {
                    window.rmsnum.push(data[i]['general_offense_number']);

                }
            }
            window.rmsn = window.narrative_go_numbers.filter(function(n) {
                return window.rmsnum.indexOf(n) != -1
            });
            //console.log(window.narrative_go_numbers.length+' '+window.rmsn);
            for (var i = 0; i < data.length; i++) {
                //console.log(window.goNumbers+' '+data[i]['general_offense_number']);
                //console.log(data[i]['general_offense_number']);
                if (window.goNumbers.indexOf(data[i]['general_offense_number']) > -1) {
                    //console.log('yes');
                    //console.log(data[i]['general_offense_number']);
                    if (window.narrative_go_numbers.indexOf(data[i]['general_offense_number']) > -1) {
                        //console.log(data[i]['general_offense_number']);
                        window.rms.push(data[i]);
                    }
                }
            }
            //console.log(window.rms);
            $.each(window.rms, function(i, entry) {
                var contentString = '<div id="content">' +
                    '<div id="siteNotice">' +
                    '</div>' +
                    '<h1 id="firstHeading" class="firstHeading">' + entry.offense_type + ' (' + entry.general_offense_number + ')</h1>' +
                    '<div id="bodyContent">' +
                    //'<input type="button" value="Show videos" class="map_show_videos" data-event-number="'+goNumberConversion[entry.general_offense_number]+'" onclick="showEvent(\''+goNumberConversion[entry.general_offense_number]+'\')" />'+
                    //'<input type="button" value="Show videos" class="map_show_videos" data-event-number="'+goNumberConversion[entry.general_offense_number]+'" />'+
                    '</div>' +
                    '</div>';

                var infowindow = new google.maps.InfoWindow({
                    content: contentString
                });
                var icon_name = entry.offense_type.replace(' ', '').replace('IES', 'Y').trim();
                if (icon_name.endsWith('CALLS')) {
                    //console.log(icon_name);
                    icon_name = icon_name.substring(0, icon_name.length - 5);
                }
                if (icon_name == 'CASUALTY') {
                    icon_name = 'INJURY';
                }
                if (icon_name == 'GUN') {
                    icon_name = 'WEAPON';
                }
                if (icon_name.endsWith('S') && icon_name != 'TRESPASS') {
                    icon_name = icon_name.substring(0, icon_name.length - 1);
                }
                if (icon_name == 'PERSONDOWN/INJURY') {
                    icon_name = 'INJURY';
                }
                if (icon_name == 'AUTORECOVERY') {
                    icon_name = 'VehicleTheft';
                }
                if (icon_name == 'THREATS,HARASSMENT') {
                    icon_name = 'Threats';
                }
                if (icon_name == 'THEFT') {
                    icon_name = 'OtherProp';
                }
                if (icon_name.indexOf('TRAFFICRELATED') > -1) {
                    icon_name = 'TRAFFIC';
                }
                if (icon_name == 'LIQUORVIOLATION') {
                    icon_name = 'Liquor';
                }
                if (icon_name.indexOf('BURGLARY') > -1) {
                    icon_name = 'Burglary';
                }
                if (icon_name.indexOf('MISC') > -1) {
                    icon_name = 'Misc';
                }
                if (icon_name.indexOf('NAR') > -1) {
                    icon_name = 'Narcotics';
                }
                if (icon_name.indexOf('SUS') > -1) {
                    icon_name = 'Suspicious';
                }
                if (icon_name.indexOf('DISTURBANCE') > -1) {
                    icon_name = 'Disturbance';
                }
                if (icon_name.indexOf('DAMAGE') > -1) {
                    icon_name = 'PropDamage';
                }
                if (icon_name.indexOf('PARKING') > -1) {
                    icon_name = 'VehicleTheft';
                }
                var marker = new google.maps.Marker({
                    position: new google.maps.LatLng(entry.latitude,
                        entry.longitude),
                    map: map,
                    title: entry.general_offense_number,
                    icon: 'http://web6.seattle.gov/mnm/images/crime2//' + icon_name + '.png'
                });
                marker.set("event_id", goNumberConversion[entry.general_offense_number]);
                google.maps.event.addListener(marker, 'click', function() {
                    $.get('https://data.seattle.gov/resource/ktpa-re45.json?go_number=' + entry.general_offense_number, function(rmsdata) {
                        if (rmsdata.length > 0) {
                            $('#narrative').html(rmsdata[0]['narrative']);
                        } else {
                            $('#narrative').html('');
                        }
                    });
                    showEvent(entry.general_offense_number);
                    //$(this).find('input').trigger('click');
                    //console.log($(this).find('input'));
                    if (openedInfoWindow != null)
                        openedInfoWindow.close();
                    infowindow.open(map, marker);
                    openedInfoWindow = infowindow;
                    google.maps.event.addListener(infowindow, 'closeclick', function() {
                        openedInfoWindow = null;
                    });
                    google.maps.event.addListener(map, 'click', function() {
                        infowindow.close();
                    });
                });
            });
        });
        //console.log(url); // url too long for DSG
        //console.log(window.goNumbers);

    });
}

function toTitleCase(str) {
    try {
        return str.replace(/\w\S*/g, function(txt) {
            return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
        });
    } catch (e) {
        return str;
    }
}
if (!String.prototype.endsWith) {
    String.prototype.endsWith = function(searchString, position) {
        var subjectString = this.toString();
        if (position === undefined || position > subjectString.length) {
            position = subjectString.length;
        }
        position -= searchString.length;
        var lastIndex = subjectString.indexOf(searchString, position);
        return lastIndex !== -1 && lastIndex === position;
    };
}
var openedInfoWindow = null;

function isSensitive(category) {
    if (category == undefined) {
        return false;
    }
    var sensitiveCategories = ['Rape', 'Homicide', 'Crisis', 'Suicide'];
    var is_sensitive = false;
    if (category.indexOf('|') > -1) {
        var c = category.split("|");
        for (var j = 0; j < c.length; j++) {
            if (sensitiveCategories.indexOf(c[j]) > -1) {
                is_sensitive = true;
            }
        }
    } else {
        if (sensitiveCategories.indexOf(category) > -1) {
            is_sensitive = true;
        }
    }
    return is_sensitive;
}

function isSensitiveTag(row) {
    if ('evidence_tags' in row) {
        if (row['evidence_tags'].toLowerCase().indexOf('inside') > -1 || row['evidence_tags'].toLowerCase().indexOf('private') > -1) {
            return true;
        } else {
            return false;
        }
    } else {
        return false;
    }
}

function showButton(row) {

    if (row['flag_y_n'] == 'Y') {
        return "<td>Video intentionally withheld per body worn video flagging policy</td>";
    } else if (flaggedCases.indexOf(row['id_external']) > -1) {
        return "<td>Video intentionally withheld per body worn video flagging policy (failsafe: video not flagged but others for this case were)</td>";
    } else if (isSensitive(row['categories'])) {
        return "<td>Video intentionally withheld per body worn video flagging policy (failsafe: video not flagged but it's in a sensitive category)</td>";
    } else if (isSensitiveTag(row)) {
        return "<td>Video intentionally withheld per body worn video flagging policy (failsafe: video not flagged but an evidence tag incidates it should be)</td>";
    } else if ('youtube_id' in row) {
        return '<td><input type="button" value="Play the video" class="play" data-youtube-id="' + row['youtube_id'] + '" /></td>';
    } else {
        return '<td>Technical glitch: video wasn\'t published to Youtube properly. You can <a href="https://www.youtube.com/results?search_query=' + row['evidence_id'] + '" target="_new">try a Youtube search</a></td>';
    }
}

function showCategory(category) {
    console.log('Showing category '+category);
    $('#videos td').not('.videos').remove();
    $('#status').show();
    $('#videos').hide();
    $.get('https://data.seattle.gov/resource/y2d4-ftqb.json?$where=categories like \'%25' + category + '%25\'&$order=created_date_record_start DESC&$select=owner_badge_id,owner_last_name,owner_first_name,youtube_id,created_date_record_start,id_external,categories,evidence_tags,flag_y_n,evidence_id', function(data) {
        $('.header').html('<th></th><th>Officer ID</th><th>Last name</th><th>First name</th><th>Datetime started</th><th>Event number</th><th>Categories</th><th>Tags</th><th>Flagged</th>');
        for (var i = 0; i < data.length; i++) {
            var row = data[i];
            var html = '<tr>';
            html += showButton(row);
            var columns = ['owner_badge_id', 'owner_last_name', 'owner_first_name', 'created_date_record_start', 'id_external', 'categories', 'evidence_tags', 'flag_y_n'];
            for (var j = 0; j < columns.length; j++) {
                var cell = row[columns[j]];
                if (cell == undefined) {
                    html += '<td></td>';
                } else {
                    if (j == 1 || j == 2) {
                        html += '<td>' + toTitleCase(cell) + '</td>';
                    } else if (j == 4) {
                        html += '<td><a href="" class="event_number">' + cell + '</a></td>';
                    } else {

                        html += '<td>' + cell + '</td>';
                    }
                }
            }


            html += '</tr>';
            html += '<tr class="video"><td colspan="9"></td></tr>';
            $('#videos').append(html);
            $('#videos').show();
            $('#status').hide();
        }

        //$('#data').html(JSON.stringify(data));
    });
}

function showEvent(eventNumber) {
    $('#videos td').not('.videos').remove();
    $('#status').show();
    $('#videos').hide();
    $.get('https://data.seattle.gov/resource/y2d4-ftqb.json?$where=id_external in(\'' + eventNumber + '\',\'' + window.goNumberConversion[eventNumber.replace('-', '')] + '\',\'' + removeZeros(eventNumber) + '\')&$order=created_date_record_start DESC&$select=owner_badge_id,owner_last_name,owner_first_name,youtube_id,created_date_record_start,id_external,categories,evidence_tags,flag_y_n', function(data) {
        $('.header').html('<th></th><th>Officer ID</th><th>Last name</th><th>First name</th><th>Datetime started</th><th>Event number</th><th>Categories</th><th>Tags</th><th>Flagged</th>');
        for (var i = 0; i < data.length; i++) {
            var row = data[i];
            var html = '<tr>';
            html += showButton(row);
            var columns = ['owner_badge_id', 'owner_last_name', 'owner_first_name', 'created_date_record_start', 'id_external', 'categories', 'evidence_tags', 'flag_y_n'];
            for (var j = 0; j < columns.length; j++) {
                var cell = row[columns[j]];
                if (cell == undefined) {
                    html += '<td></td>';
                } else {
                    if (j == 1 || j == 2) {
                        html += '<td>' + toTitleCase(cell) + '</td>';
                    } else if (j == 4) {
                        html += '<td><a href="" class="event_number">' + cell + '</a></td>';
                    } else {

                        html += '<td>' + cell + '</td>';
                    }
                }
            }


            html += '</tr>';
            html += '<tr class="video"><td colspan="9"></td></tr>';
            $('#videos').append(html);
            $('#videos').show();
            $('#status').hide();
        }

        //$('#data').html(JSON.stringify(data));
    });
}
String.prototype.repeat = function(num) {
    return new Array(num + 1).join(this);
}

function removeZeros(goNumber) {
    if (goNumber.indexOf('-') > -1) {
        var parts = goNumber.split("-");
        if (parts[0].length != 4) {
            parts[0] = '20' + parts[0];
        }
        for (var j = 0; j < parts[1].length; j++) {
            if (parts[1][0] == '0') {
                parts[1] = parts[1].slice(1);
                //console.log(parts[1]);
            } else {
                break;
            }
        }
        return parts[0] + '-' + parts[1];
    } else {
        return goNumber;
    }
}
$(function() {
    $('.container').not('nav .container').hide();
    if (window.location.hash) {
        var theHash = window.location.hash.slice(1);
        selectContainer(theHash);
    } else {
        var defaultContainerName = 'home';
        selectContainer(defaultContainerName);
    }
    $("a[href^='#']").click(function(e) {
        var containerName = $(this).attr('href').slice(1);
        selectContainer(containerName);

    });
    $('#request_an_account').click(function() {

        $.post('/submit_request_for_account/', {
            'agency_email': $('#agency_email').val()
        }, function(data) {
            $('#account_request_msg').html(data['msg']);
        });
    });
    $('#login').click(function() {
        $.post('/login/', {
            'username': $('#username').val(),
            'password': $('#password').val()
        }, function(data) {
            $('#login_msg').html(data['msg']);
        });
    });

    
    $.get('https://data.seattle.gov/resource/ktpa-re45.json?$select=go_number&$limit=50000', function(data) {
        window.narrative_go_numbers = [];
        for (var i = 0; i < data.length; i++) {
            window.narrative_go_numbers.push(data[i]['go_number']);
        }
        //console.log(window.narrative_go_numbers);
    });
    $.get('https://data.seattle.gov/resource/y2d4-ftqb.json?flag_y_n=Y&$select=id_external&$group=id_external&$where=id_external%20IS%20NOT%20NULL', function(data) {
        window.flaggedCases = [];
        for (var i = 0; i < data.length; i++) {
            window.flaggedCases.push(data[i]['id_external']);
        }
    });
    // Construct the catalog query string
    url = 'http://data.ct.gov/resource/9k2y-kqxn.json?organization_type=Public%20School%20Districts&$$app_token=CGxaHQoQlgQSev4zyUh5aR5J3';
    rms_with_narrative();
    $.get('https://data.seattle.gov/resource/y2d4-ftqb.json?$group=categories&$select=categories&$where=categories%20IS%20NOT%20NULL', function(data) {
        var categories = [];
        for (var i = 0; i < data.length; i++) {
            var row = data[i]['categories'];
            if (row.indexOf('|') > -1) {
                var c = row.split("|");
                for (var j = 0; j < c.length; j++) {
                    if (categories.indexOf(c[j]) == -1) {
                        categories.push(c[j]);
                    }
                }
            } else {
                if (categories.indexOf(row) == -1) {
                    categories.push(row);
                }
            }
        }
        categories = categories.sort();
        for (var i = 0; i < categories.length; i++) {
            $('#categories').append('<option>' + categories[i] + '</option>');
        }
    });
    $.get('https://data.seattle.gov/resource/n6as-h2bj.json?$select=owner_last_name,owner_first_name,owner_badge_id&$group=owner_last_name,owner_first_name,owner_badge_id&$order=owner_last_name', function(data) {
        for (var i = 0; i < data.length; i++) {
            var row = data[i];
            var badge_id = row['owner_badge_id'];
            var name = toTitleCase(row['owner_last_name']) + ', ' + toTitleCase(row['owner_first_name']) + ' (' + badge_id + ')';
            if (badge_id !== undefined) {
                $('#employees_who_recorded_videos').append('<option value="' + badge_id + '">' + name + '</option>');
            }
        }
    });
    $('body').on('change', '#categories', function(e) {
        console.log('show categories');
        showCategory($(this).find(':selected').text());
    });
    $('body').on('change', '#opa_cases', function(e) {
        showEvent($(this).find(':selected').val());
    });
    $('body').on('change', '#employees_who_recorded_videos', function(e) {
        var badge_id = this.value;
        $('#videos td').not('.videos').remove();
        $('#status').show();
        $('#videos').hide();
        $('.header').html('<th></th><th>Datetime started</th><th>Event number</th><th>Categories</th><th>Tags</th><th>Flagged</th>');
        $.get('https://data.seattle.gov/resource/n6as-h2bj.json?owner_badge_id=' + badge_id + '&$order=created_date_record_start DESC&$select=youtube_id,created_date_record_start,id_external,categories,evidence_tags,flag_y_n', function(data) {
            for (var i = 0; i < data.length; i++) {
                var row = data[i];
                var html = '<tr>';
                html += showButton(row);
                var columns = ['created_date_record_start', 'id_external', 'categories', 'evidence_tags', 'flag_y_n'];
                for (var j = 0; j < columns.length; j++) {
                    var cell = row[columns[j]];
                    if (cell == undefined) {
                        html += '<td></td>';
                    } else {
                        if (j == 1) {
                            html += '<td><a href="" class="event_number">' + cell + '</a></td>';
                        } else {

                            html += '<td>' + cell + '</td>';
                        }
                    }
                }


                html += '</tr>';
                html += '<tr class="video"><td colspan="6"></td></tr>';
                $('#videos').append(html);
                $('#videos').show();
                $('#status').hide();
            }

            //$('#data').html(JSON.stringify(data));
        });
    });
    $('body').on('click', '.play', function(e) {
        var videoHtml = '<iframe width="420" height="315" src="https://www.youtube.com/embed/' + $(this).attr('data-youtube-id') + '?autoplay=1" frameborder="0" allowfullscreen></iframe>';
        $('.video').hide();
        $(this).parent().parent().next().show();
        $(this).parent().parent().next().find('td').html(videoHtml);
    });
    $('body').on('click', '.event_number', function(e) {
        showEvent($(this).text());
        e.preventDefault();
    });
    $('body').on('click', '.map_show_videos', function(e) {
        var en = $(this).attr('data-event-number');
        showEvent(en);
    });
    $('body').on('click', '#event_number_go', function(e) {
        showEvent($('#event_number').val());
    });
    $("#event_number").keyup(function(event) {
        if (event.keyCode == 13) {
            showEvent($('#event_number').val());
        }
    });
    $("input[name=maptype]:radio").change(function() {
        //alert($(this).val());
        eval($(this).val())();
    });
});
    </script>
    
    <style>
    body {
  padding-top: 50px;
}
.error {
color:red;
}
#login_table th {
padding-right:20px;
}
#meeting_videos {
float:left;
border-right:1px solid blue; 
padding:0 40px 0 0;
margin:0 20px 20px 0;
width:480px;
}
#meeting_videos h3 {
margin-top:0;
}
h2 span {
font-size:.9em;
}
.floatleft {
float:left;
margin:0 10px 10px 0;
}
.right {
width:400px;
float:right;
margin:0 0 10px 10px;
}
.video_right {
clear:right;
width:280px;
height:157px;
margin:30px 0 10px 10px;
float:right;
}
.video_right_with_bottom_margin {
clear:right;
width:280px;
height:157px;
margin:0 0 10px 10px;
float:right;
}
#narrative {height:480px; overflow-y:scroll;}

#status,#videos {
    display:none;
}
.video th, .video td {
    border:1px solid #000;
    padding:5px;
    text-align:left;
    vertical-align:top;
}
.video {
    display:none;
}
#map { height: 480px; width: 640px; margin-right:10px; }
     #narrative {height:480px; overflow-y:scroll;}

    </style>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="navbar-brand">RedactVideo</span>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav main-nav">
            <li><a href="#home">Home</a></li>
            <li><a href="#the_seattle_story">The Seattle Police Story</a></li>
            <li><a href="#press_coverage">Press coverage</a></li>
            <li><a href="#video_library">SPD's Video library</a></li>
            <li><a href="#pilot_policy">BWV policy</a></li>
            
            <li><a href="#faq">FAQs</a></li>
            <li><a href="#demo">Demo</a></li>
            <li><a href="https://github.com/seattle-police/redactvideodotorg/">Code on GitHub</a></li>
            <li><a href="#get_involved">Get involved</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div id="home_container" class="container">

      <div class="starter-template">
        <h2>Web based video redaction software developed by the Seattle Police Department</h2>
        <img src="http://www.seattle.gov/police/images/footerShield.png" class="floatleft" />
        <p class="lead">The <a href="http://www.seattle.gov/police/">Seattle Police Department</a> will start using body worn video (BWV) department wide in 2016.
        To have a successful BWV program the department must efficiently handle the hundreds of public records requests it'll receive for the footage each year. This includes requests
        for the entire collection. To deal with the onslaught of video requests the department held a hackathon in December 2014 and hired a civic hacker in May 2015 to develop software not commercially available.</p>
        <p class="lead">This website, ran by the department, allows law enforcement agencies to try out the free open source redaction software that the department is developing. 
        The software can over-blur and post online a group of videos automatically so requesters can get a sense of which videos are worth requesting while protecting people's identities. For formally requested videos requiring redaction it can track selected objects reducing redaction time. 
        And it can also attempt to automatically redact every person's head for proactive publication.</p>
        <p class="lead">
        Agencies can have the department assist them with installing the software using their own
        <a href="https://aws.amazon.com/">Amazon Web Services</a> or <a href="https://azure.microsoft.com/en-us/">Microsoft Azure</a>
        cloud accounts at no extra charge by emailing <a href="mailto:timothy.clemans@seattle.gov">timothy.clemans@seattle.gov</a>.
        For agencies not comfortable with the cloud the software can be installed on computers they own.</p>
        <div id="meeting_videos"><h3>Videos from the department's June 2015 national meeting <em>Public Access to Footage: Balancing Transparency and Privacy</em></h2>
        <script height="270px" width="480px" src="http://player.ooyala.com/iframe.js#ec=IxOHh0dTqZNsC3LGVnsbsKgmS3wOkuNu&pbid=c8cff4cec9d94ae0896f6443af7ee837"></script>
        <iframe src="http://www.seattlechannel.org/embedvideoplayer?videoid=x56544" frameborder="0" scrolling="no"
        style="height: 270px; width: 480px; margin-below:20px;" ></iframe>
        <iframe src="http://www.seattlechannel.org/embedvideoplayer?videoid=x56534" frameborder="0" scrolling="no" 
        style="height: 270px; width: 480px" ></iframe>
        </div>
        <h3>Request an account</h3>
        <p>To request an account you must be a representative of a law enforcement agency. After confirming you control that email address you will be asked
        to create a password. If your agency email address ends with .gov 
        you will automatically be approved to use the site.  If your email doesn't end with .gov a person will verify that the email belongs to a law enforcement agency.</p>
        <p id="request_account_form"><strong>Your agency email address:</strong> <input type="text" id="agency_email" />
        <input type="button" id="request_an_account" value="Submit request" /> <span id="account_request_msg"></span>
        </p>
        
        <h3>Login</h3>
        <p><strong>Note:</strong> An email will be sent to you after you press login. To finish logging
        in click on the link in the email. This is called two-factor authentication. It ensures that even if hackers have
        your password they can't login unless they've compromised your email too.</p>
        
        <table id="login_table">
        <tr><th>Email:</th><td><input type="text" id="username" name="username" /></td></tr>
        <tr><th>Password:</th><td><input type="password" id="password" name="password" /></td></tr>
        </table>
        <input type="button" id="login" value="Login" /> <span id="login_msg"></span>
        
      </div>
      
    </div>
    <div id="the_seattle_story_container" class="container">
    <iframe class="video_right" src="https://www.youtube.com/embed/SPoLUn8mmOM" frameborder="0" allowfullscreen></iframe>
    <h2>The Seattle Police Story: <span>Received records request for 1.6 million dash camera videos, held hackathon, launched body worn video (BWV) pilot, hired the civic hacker who demanded the videos, posted thousands of blurred videos on Youtube, now offering 
    free open source video redaction software, and preparing to deploy BWV department-wide</span></h2>
    
    <p>In June of 2014 The Supreme Court of Washington ruled in Fisher v. Seattle Police that we, the Seattle Police Department, must provide virtually all dash camera videos  
not apart of an active investigation or pending litigation when formally requested to do so. The litigants, Fisher Broadcasting, agreed to narrow their request from thousands of videos to 151 videos.
Even then it was a big challenge. We also started getting lots of smaller requests. So we started the Video to Public project to figure out ways to more efficiently handle records requests.</p>
<blockquote class="right">"SPDs willingness to partner with critics to reach pragmatic solutions is laudable and should serve as a model for working through other difficult problems in the future." - Seattle Police Monitor <a href="http://static1.squarespace.com/static/5425b9f0e4b0d66352331e0e/t/557f3f8fe4b0e62e4460ff9b/1434402703419/Fifth+Semiannual+Report.pdf" target="_blank">Fifth Semiannual Report</a></blockquote>

<p>Three months later, in September, we and other Washington police departments receive an anonymous records request for all dash and body worn video. 
Our attorneys told us we had to start fulfilling the anonymous request even though we had 1.6 million videos amounting to over three hundred thousand hours.
To protect the privacy of juveniles, confidential witnesses/victims, patients, and people's identification numbers we have to watch any requested video from start to finish. In some cases we are required to do manual redaction that takes us hours per video.</p> 
<p>Soon our anonymous requester was posting on Youtube a wide range of police encounters from the mundane to foot chases. This sparked privacy concerns.</p>
<p>We considered cancelling our plans to test body worn video until the records act was significantly modified. But we knew that
ultimately wasn't an option for us because of the settlement agreement with the Department of Justice. The state legislature decided
not to modify the records act even though a highly negotiated proposed bill was passed by committee.</p>
<p>Surrounded by tech giants like Amazon, Microsoft, Google, Facebook, Twitter, Vievu, Socrata, and Taser we decided to hold a hackathon in December 2014.
Among the presenters were college students, civic hackers, freelance video redaction experts, and industry representatives.
They presented technologies in their infancy that automatically detect and redact faces and sensitive audio. </p>
<p>The anonymous requester dropped his request with us and presented a strategy called over-redaction. Using that strategy
we demonstrated that we are committed to transparency. We got lots of positive press coverage.
We automatically remove audio and blur each frame. One
can make out what's going on visually while protecting the identities of citizens. If a viewer thinks something fishy was recorded they are 
able to save us a lot of time by telling us not only the video they want but the time periods that matter to them.</p>
<p>After several months of volunteering, we hired the anonymous requester, Tim Clemans, in May of this year as a temporary employee. The goal was to apply over-redaction to thousands of body worn videos and corresponding police report narratives. 
The strategy was immediately proven effective
when the news outlet that sued us made a request for just 48 minutes of footage out of three hundred minutes footage recorded at the May Day riot
 after viewing the automatically
over-redacted videos on our Youtube channel. Clemans went on to develop software vital to our new Realtime Crime Center //alerting its staff to important dispatch messages using keywords.</p>
<p>With transparency vs privacy becoming the number one roadblock for implementing body worn video we tasked Clemans this September with making the software
available for any law enforcement agency to use as easily and inexpensively as possible. Our partners at Amazon and Microsoft are providing us
with cloud storage and computing to make this happen. Our code is open source so anyone can use it on their own machines as well as improve it.
We will continue to make our video redaction platform more sophisticated with the goal of automatically redacting faces and personal info from sound.
In the meantime we have a proven way for requesters to narrow their requests while demonstrating a commitment to transparency that balances privacy. </p>

 


    </div>
    <div id="press_coverage_container" class="container">
      <h2>Press coverage: <span>Partnering with a critic led to positive press coverage</span></h2>
      <iframe class="video_right_with_bottom_margin" src="http://www.liveleak.com/ll_embed?f=64a28f98d2c3" frameborder="0" allowfullscreen></iframe>
      <object id="flashObj" class="video_right_with_bottom_margin" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,47,0"><param name="movie" value="http://c.brightcove.com/services/viewer/federated_f9?isVid=1" /><param name="bgcolor" value="#FFFFFF" /><param name="flashVars" value="videoId=4317108711001&linkBaseURL=http%3A%2F%2Fwww.kirotv.com%2Fvideos%2Fonline%2Fvideo-seattle-police-hosts-meeting-on-body-cameras%2FvDWK5r%2F&playerID=836564316001&playerKey=AQ~~,AAAAR_p154k~,Ay3i1IziTki8aMdGaY0jFtvV8ga6DiJN&domain=embed&dynamicStreaming=true" /><param name="base" value="http://admin.brightcove.com" /><param name="seamlesstabbing" value="false" /><param name="allowFullScreen" value="true" /><param name="swLiveConnect" value="true" /><param name="allowScriptAccess" value="always" /><embed src="http://c.brightcove.com/services/viewer/federated_f9?isVid=1" bgcolor="#FFFFFF" flashVars="videoId=4317108711001&linkBaseURL=http%3A%2F%2Fwww.kirotv.com%2Fvideos%2Fonline%2Fvideo-seattle-police-hosts-meeting-on-body-cameras%2FvDWK5r%2F&playerID=836564316001&playerKey=AQ~~,AAAAR_p154k~,Ay3i1IziTki8aMdGaY0jFtvV8ga6DiJN&domain=embed&dynamicStreaming=true" base="http://admin.brightcove.com" name="flashObj" seamlesstabbing="false" type="application/x-shockwave-flash" allowFullScreen="true" swLiveConnect="true" allowScriptAccess="always" pluginspage="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"></embed></object>
      <iframe class="video_right_with_bottom_margin" src="https://www.youtube.com/embed/Eu6c6VxHG8I" frameborder="0" allowfullscreen></iframe>
      
      <iframe width="280" height="158" src="https://www.youtube.com/embed/3itYLOpxWqI" frameborder="0" allowfullscreen></iframe>
      <iframe width="280" height="158" src="https://www.youtube.com/embed/N1fOfRETtfc" frameborder="0" allowfullscreen></iframe>
      <iframe width="280" height="158" src="https://www.youtube.com/embed/h1HHx3yVcHc" frameborder="0" allowfullscreen></iframe>
       <ul>
       <li><strong>PoliceOne.com</strong> <a href="http://www.policeone.com/police-products/body-cameras/articles/8545907-How-the-SPD-is-using-YouTube-to-usher-in-a-new-era-of-police-transparency/">How the SPD is using YouTube to usher in a new era of police transparency:
The Seattle Police Department's strategy of looking outward to find solutions may ultimately help agencies nationwide</a></li>
      <li><strong>New York Times:</strong> <a href="http://www.nytimes.com/2015/04/27/us/downside-of-police-body-cameras-your-arrest-hits-youtube.html">Downside of Police Body Cameras: Your Arrest Hits YouTube</a>
      <li><strong>Backchannel:</strong> <a href="https://medium.com/backchannel/the-body-cam-hacker-who-schooled-the-police-c046ff7f6f13">The Body Cam Hacker Who Schooled the Police:
This activist demanded millions of surveillance videos from the Seattle police. They handed him the data and a job.</a></li>
      <li><strong>Associated Press:</strong> <a href="https://www.yahoo.com/tech/s/police-body-cameras-may-solve-one-problem-create-071407719--politics.html">Police body cameras show more than just the facts</a></li>
      <li><strong>The Stranger:</strong> <a href="http://www.thestranger.com/blogs/slog/2015/03/05/21834935/seattle-police-department-leader-gets-open-government-award-for-bodycam-program">Seattle Police Department Leader Gets Transparency Award for Bodycam Program</a></li>
      <li><strong>The Atlantic:</strong> <a href="http://www.theatlantic.com/technology/archive/2015/04/what-good-is-a-video-you-cant-see/391421/">What Good is a Video You Can't See?</a></li>
      <li><strong>The Guardian:</strong> <a href="http://www.theguardian.com/us-news/2015/mar/09/seattle-police-posting-body-camera-footage-youtube-transparency">Seattle police post blurry body-camera videos to YouTube in transparency bid</a></li>
      </ul>
    </div>
    <div id="video_library_container" class="container">
    <h2>Seattle Police Video Library</h2>
    <div>
<input type="radio" name="maptype" value="rms_with_narrative" checked> Videos with an associated over-redacted narrative online
<input type="radio" name="maptype" value="cad"> All dispatches with associated body worn video
</div>
  <div id="map" style="float:left;"></div>
  <div id="narrative"></div>
  <div id="clear:both"></div>
  <br/>
<strong>Event number:</strong> <input type="text" id="event_number" /><input type="button" value="Go" id="event_number_go" />
<strong>Categories:</strong> <select id="categories"><option></option></select>
<strong>Employees who recorded videos:</strong>
<select id="employees_who_recorded_videos"><option></option></select>
<strong>OPA cases:</strong>
<select id="opa_cases"><option></option></select>
<h2></h2>
<div id="status">Loading</div>
<table id="videos"><tr class="header">
    <th></th><th>Datetime started</th><th>Event number</th><th>Categories</th><th>Tags</th><th>Flagged</th></tr></table>

    </div>
<div id="pilot_policy_container" class="container">
<h2>Seattle Police Body Worn Video Pilot Policy</h2>
</div>
</body>
</html>
